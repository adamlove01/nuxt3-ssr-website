import{o as T,c as U,w as t,g as r,t as m,T as D,a as e,G as v,V as k,v as F,x as d,j as M,l as O,C as V,B as P,b as A,d as b,H as $,s,I as h,J as L,K as z,m as S,L as E,M as G,N as H,P as I,A as J,O as w}from"./entry.Dm-Fm04a.js";import"./paginateSchema.BkWWoeP8.js";import{a as K}from"./apiFetch.j0aHbuBY.js";const R={class:"d-flex justify-space-between mb-4"},Q={class:"flex-grow-1"},W={class:"text-h6 mb-0"},X={__name:"PageTitle",props:{title:{type:String,required:!0,default:""}},setup(c){return(f,_)=>(T(),U(k,{class:"pt-2 pb-0"},{default:t(()=>[r("div",R,[r("div",Q,[r("h1",W,m(c.title.toUpperCase()),1)]),D(f.$slots,"default")]),e(v)]),_:3}))}},te=X,Y={class:"d-flex justify-space-between"},Z={class:"text-h5 align-self-center"},se={__name:"Update",props:{userData:{type:Object,required:!0,default:()=>({})}},emits:["done"],setup(c,{emit:f}){const _=c,y=f;F();const u=_.userData,l=d({id:u.id,name:u.name,email:u.email,role:u.role,status:u.status}),j=d(null),i=d(!1);d(!1);const p={};for(const a in l.value)p[a]=[()=>H(a,l.value[a],w)];function g(){y("done",{status:"cancel"})}async function x(){i.value=!0;const[a,o]=await I(l.value,w);if(a||Object.keys(l.value).every(C=>l.value[C]===u[C]))return i.value=!1;const{status:B,code:N,field:q}=await K("/api/users/update",{method:"POST",body:l.value});return y("done",{status:B,message:J(N,q)})}return(a,o)=>(T(),U(G,{ref_key:"form",ref:j,"validate-on":"blur lazy",onSubmit:E(x,["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(O,null,{default:t(()=>[r("div",Y,[r("span",Z,m(a.$t("users.editUser")),1),e(V,{icon:"mdi-close",class:"mr-n3",flat:"",onClick:g})])]),_:1}),e(v),e(P,{class:"pa-0"},{default:t(()=>[e(k,null,{default:t(()=>[e(A,null,{default:t(()=>[e(b,{cols:"12",class:"pb-0 mt-2"},{default:t(()=>[e($,{modelValue:s(l).name,"onUpdate:modelValue":o[0]||(o[0]=n=>s(l).name=n),variant:"outlined",class:"mb-2",autocomplete:"name",label:a.$t("fields.fullName"),rules:p.name,required:""},null,8,["modelValue","label","rules"]),e($,{modelValue:s(l).email,"onUpdate:modelValue":o[1]||(o[1]=n=>s(l).email=n),variant:"outlined",class:"mb-2",autocomplete:"email",label:a.$t("fields.email"),rules:p.email,required:""},null,8,["modelValue","label","rules"])]),_:1}),e(b,{cols:"12",sm:"6",class:"py-0"},{default:t(()=>[e(h,{modelValue:s(l).role,"onUpdate:modelValue":o[2]||(o[2]=n=>s(l).role=n),variant:"outlined",label:a.$t("fields.role"),items:a.$tm("fields.roleSelect")},null,8,["modelValue","label","items"])]),_:1}),e(b,{cols:"12",sm:"6",class:"py-0"},{default:t(()=>[e(h,{modelValue:s(l).status,"onUpdate:modelValue":o[3]||(o[3]=n=>s(l).status=n),variant:"outlined",label:a.$t("fields.status"),items:a.$tm("fields.statusSelect")},null,8,["modelValue","label","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(v),e(L,{class:"mx-2 my-1"},{default:t(()=>[e(z),e(V,{variant:"flat",onClick:g},{default:t(()=>[S(m(a.$t("all.buttons.cancel")),1)]),_:1}),e(V,{disabled:s(i),loading:s(i),type:"submit",variant:"tonal","min-width":"100"},{default:t(()=>[S(m(a.$t("all.buttons.save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},512))}};export{se as _,te as a};
